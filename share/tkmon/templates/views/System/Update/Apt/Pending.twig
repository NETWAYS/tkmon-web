<h4>{% trans "Pending packages" %}</h4>

<p>
    {% trans %}
    The following list shows you pending updates to your system. Click the button
    "refresh" to renew the output.
    {% endtrans %}
</p>

<div>
    <button type="button" class="btn btn-primary" id="refresh-pending-updates">
        <i class="icon-refresh"></i> {% trans "Refresh" %}
    </button>
</div>

<div class="container-spacer-down">

</div>

<div id="pending-updates-target" data-ajax-call="{{ web_link('PendingUpdates') }}" data-ajax-call-insert="true">
    <i class="icon-spinner icon-spin icon-large"></i> {% trans "Loading pending upgrades" %}...
</div>

<script>
    /*global $: false require:false */
    require(['jquery', 'TKMON/jquery/AjaxContent'], function() {
        "use strict";

        var spinnerLabel = '{% trans "Loading pending upgrades" %}' + '...';

        $('#refresh-pending-updates').click(function() {
            $('#pending-updates-target').html('<i class="icon-spinner icon-spin icon-large"></i> ' + spinnerLabel);
            $(this).Html5AjaxContent();
        });
    });
</script>